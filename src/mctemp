		TTL	e.mctemp********************************************************************************do_endanim	LDA	#6		STA	level_number		LDA	#1		STA	screen_number		JSR	screen		BANK	4		LDA	#>final		STA	restore+1		LDA	#<final		STA	restore+2		LDA	#10*8		STA	ra_height+1		LDA	#13		STA	ra_width+1		LDX	#48		LDY	#2*8		JSR	restore_area		JSR	reset_cols		STZ	frame		STZ	lb_frame		LDA	#64		; X co-ord		STA	xy		LDA	#1		STA	xy+1		LDA	#32		; Y co-ord		STA	xy+2		STZ	xy+3		LDA	#25		; height		STA	xy+4		JSR	setup_ball		JSR	tel2		LDA	#1		STA	indicator * * * * * * * * * * * * * * * * * * * *f_lp		JSR	anim_doframe		JSR	inclb		LDA	lb_frame		LDX	#42		LDY	#61		JSR	disp_lball		LDA	lb_frame		EOR	#15		LDX	#54		LDY	#88		JSR	disp_lball		LDA	#19		JSR	osbyte		JSR	osbyte		INC	frame		LDA	frame		CMP	#frames		BLT	nfcl		STZ	framenfcl		LDA	xy+2		CLC		ADC	#3		STA	xy+2		LDA	xy+3		ADC	#0		STA	xy+3		LDA	xy+3		CMP	#2		BLT	f_lp		LDA	xy+2		CMP	#20		BLT	f_lp * * * * * * * * * * * * * * * * * * * *		JSR	ting		; Hit end : ie. now teleport out		LDA	#20		STA	skip_splat2+1		JSR	no_skip_splat		LDA	#40		STA	skip_splat2+1		JSR	venetian		LDA	#6		STA	level_number		LDA	#2		STA	screen_number		LDA	controller		AND	#127		STA	controller		JSR	screen		JSR	reset_cols		LDA	#1		STA	indicator		STZ	frame		STZ	lb_frame		LDA	#&20		; X co-ord		STA	xy		STA	xy+2		LDA	#2		STA	xy+1		STA	xy+3		LDA	#12		; height		STA	xy+4		JSR	tel2f_lp2		LDA	#1		JSR	kr2		LDA	xy+2		SEC		SBC	#3		STA	xy+2		STA	xy		LDA	xy+3		SBC	#0		STA	xy+3		STA	xy+1		LDA	xy+3		BNE	f_lp2		LDA	xy+2		CMP	#128		BGE	f_lp2		LDA	#0		LDX	#>bsp2		LDY	#<bsp2		JSR	speech_bub		JSR	keep_rot		LDA	#0		LDX	#>bsp1		LDY	#<bsp1		JSR	speech_bub		LDA	#1		LDX	#>lbsp2		LDY	#<lbsp2		JSR	speech_bub		JSR	keep_rot		LDA	#0		LDX	#>bsp3		LDY	#<bsp3		JSR	speech_bub		LDA	#1		LDX	#>lbsp1		LDY	#<lbsp1		JSR	speech_bub		JSR	keep_rot		LDA	#0		LDX	#>bsp1		LDY	#<bsp1		JSR	speech_bub		LDA	#1		LDX	#>lbsp3		LDY	#<lbsp3		JSR	speech_bub		JSR	keep_rot		LDA	#0		LDX	#>bsp4		LDY	#<bsp4		JSR	speech_bub		LDA	#1		LDX	#>lbsp1		LDY	#<lbsp1		JSR	speech_bub		JSR	keep_rot		LDA	#0		LDX	#>bsp5		LDY	#<bsp5		JSR	speech_bub		JSR	keep_rot		LDA	#0		LDX	#>bsp1		LDY	#<bsp1		JSR	speech_bubf_lp4		LDA	#1		JSR	kr2		LDA	xy+2		CLC		ADC	#3		STA	xy+2		STA	xy		LDA	xy+3		ADC	#0		STA	xy+3		STA	xy+1		LDA	xy+3		CMP	#2		BNE	f_lp4		LDA	xy+2		CMP	#&20		BLT	f_lp4		JSR	venetian		RTS********************************************************************************tel2		JSR	ting		LDY	#4l11X		LDA	xy,Y		STA	workspace+&B,Y		DEY		BPL	l11X		JSR	convert_coords		BANK	4		JMP	no_skip_tele********************************************************************************speech_bub	STX	restore+1		STY	restore+2		PHA		CMP	#0		BNE	lb_sb		LDX	#7		LDY	#25		BRA	do_bublb_sb		LDX	#9		LDY	#33do_bub		STX	ra_width+1		STY	ra_height+1		BANK	5		PLA*		CMP	#0		BNE	lb_sb2		LDX	#16		LDY	#118		BRA	do_bub2lb_sb2		LDX	#2		LDY	#107do_bub2	JMP	restore_area********************************************************************************keep_rot	LDA	#100kr2		STA	dea_frcount		BANK	4f_lp3		JSR	anim_doframe		JSR	inclb		LDA	lb_frame		LDX	#10		LDY	#140		JSR	disp_lball		LDA	#19		JSR	osbyte		JSR	osbyte		DEC	frame		LDA	frame		CMP	#255		BNE	nfcl3		LDA	#frames-1		STA	framenfcl3		DEC	dea_frcount		BNE	f_lp3		RTS****************************************dea_frcount	DS	1lb_frame	DS	1********************************************************************************disp_lball	PHX		PHY		PHA		LDA	#16		STA	ms_height+1		LDA	#4		STA	ms_width+1		LDA	#>lb_mask		STA	ms_mask+1		LDA	#<lb_mask		STA	ms_mask+2		LDA	#>lb_sprt		STA	ms_sprite+1		LDA	#<lb_sprt		STA	ms_sprite+2		PLA		BEQ	skp_lb		TAXlb_l		LDA	ms_sprite+1		CLC		ADC	#&40		STA	ms_sprite+1		LDA	ms_sprite+2		ADC	#0		STA	ms_sprite+2		DEX		BNE	lb_lskp_lb		PLY		PLX		JMP	mask_sprite********************************************************************************anim_doframe	BANK	4		JSR	code		JSR	setup_ball		JSR	conv_sprite		LDA	indicator		BEQ	no_skipX		STZ	indicator		LDY	#4flp2		LDA	xy,Y		STA	workspace+&B,Y		DEY		BPL	flp2		BRA	skip_1st_halfX * * * * * * * * * * * * * * * * * * * *no_skipX	LDA	old_X		CMP	#77		BGE	skip_1st_halfX		JSR	d_shadow	; delete shadow		LDX	old_X		LDY	old_Y		JSR	restore_area * * * * * * * * * * * * * * * * * * * *skip_1st_halfX	LDY	#4loop11X	LDA	xy,Y		STA	workspace+&B,Y		DEY		BPL	loop11X		JSR	convert_coords		LDX	old_X		CPX	#77		BGE	skp33X		LDY	old_Y		JSR	save_area		LDX	old_X		LDY	old_Y		JSR	mask_sprite		LDA	old_Y		CLC		ADC	#8		STA	old_Y2		JSR	sp_shadowskp33X		BANK	5		LDY	#3loop33X	LDA	xy,Y		STA	workspace+&B,Y		STA	mem,Y		DEY		BPL	loop33X		JSR	hi		LDA	workspace+&F		STA	old_height		STA	xy+4*		LDA	old_Y*		PHA**		JSR	convert_coords**		LDA	old_Y*		CLC*		ADC	#8*		STA	old_Y2**		PLA*		STA	old_Y**		JSR	sp_shadow * * * * * * * * * * * * * * * * * * * *		BANK	4		RTS********************************************************************************reset_cols	LDA	#1		LDY	#1		JSR	vdu19		LDA	#2		LDY	#3		JSR	vdu19		LDA	#3		LDY	#7		JMP	vdu19**********************************************************************************print_hex	PHA**		AND	#&F0*		LSR	A*		LSR	A*		LSR	A*		LSR	A*		JSR	phd**		PLA*		AND	#&0F*		JSR	phd**		LDA	#32*		JMP	oswrch**phd		CMP	#10*		BLT	nl**		CLC*		ADC	#55*		BRA	phs**nl		CLC*		ADC	#48**phs		JMP	oswrch*********************************************************************************toas_fr	DS	1toas_X		DS	1****************************************do_toasanim	LDA	#11		STA	workspace+1		LDA	#&FF		STA	b_col+1		STA	b_chk		LDA	#32		STA	b_or_width		LDA	#8		STA	b_or_height		LDX	#7		JSR	box2		LDA	#0		STA	b_col+1		BANK	5		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#65		STA	toas_X		LDA	#11		LDX	#25		LDY	#0		JSR	toas_doanimtoas_l1	LDA	#16		LDX	#25		LDY	#255		JSR	toas_doanim		LDA	toas_X		CMP	#40		BGE	toas_l1		LDA	#16		LDX	#18		LDY	#255		JSR	toas_doanim		LDA	#33		LDX	#39		LDY	#120		JSR	toas_frame		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#9		LDX	#39		LDY	#120		JSR	toas_frame		LDA	#19		LDX	#25		LDY	#0		JSR	toas_doanimtoas_l2	LDA	#16		LDX	#25		LDY	#255		JSR	toas_doanim		LDA	toas_X		CMP	#16		BGE	toas_l2		LDA	#16		LDX	#32		LDY	#255		JSR	toas_doanim		LDA	#9		LDX	#9		LDY	#132		JSR	toas_frame		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		LDA	#200		JSR	key_delay		JMP	venetian********************************************************************************toas_frame	PHY		PHX		PHA		LDA	#24		STA	ra_height+1		LDA	#7		STA	ra_width+1		PLA		ASL	A		TAY		LDA	evn_table,Y		STA	restore+1		LDA	evn_table+1,Y		STA	restore+2		PLX		PLY		JMP	restore_area********************************************************************************toas_doanim	STA	toas_fr		INX		STX	tda_chk+1		CPY	#0		BEQ	tdal		LDA	#19		JSR	osbyte		JSR	osbyte		LDA	#9		LDX	toas_X		LDY	#132		JSR	toas_frame		LDA	toas_X		SEC		SBC	#4		STA	toas_X		BRA	tdaskptdal		JSR	code		LDA	#19		JSR	osbyte		JSR	osbytetdaskp		LDA	toas_fr		LDX	toas_X		LDY	#132		JSR	toas_frame		INC	toas_fr		LDA	toas_frtda_chk	CMP	#&FF		BLT	tdal		RTS********************************************************************************inclb		INC	lb_frame		LDA	lb_frame		CMP	#16		BLT	lb_ok		STZ	lb_framelb_ok		RTS********************************************************************************		CHN	mctemp2